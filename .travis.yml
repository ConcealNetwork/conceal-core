sudo: true
language: cpp

matrix:
  include:

  ## OSX, g++-8
  - os: osx
    osx_image: xcode10
    compiler: gcc
    env:
    # Need to uninstall oclint to get newer gcc installed https://github.com/travis-ci/travis-ci/issues/8826
    - MATRIX_EVAL="CC=gcc-8 && CXX=g++-8"
    - LABEL="osx-g++-8"

  # OSX, g++-7
  - os: osx
    osx_image: xcode10
    compiler: gcc
    env:
    - MATRIX_EVAL="CC=gcc-7 && CXX=g++-7"
    - LABEL="osx-g++-7"

  # Ubuntu, g++-6
  - os: linux
    dist: xenial
    compiler: gcc
    addons:
        apt:
          update: true
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - libboost-all-dev
            - g++-6
    env:
    - MATRIX_EVAL="CC=gcc-6 && CXX=g++-6"
    - LABEL="linux"
    - _DEPLOY="true"

script:
  - mkdir build
  - cd build
  - cmake -DCMAKE_BUILD_TYPE=Release -DSTATIC=true ..
  - make
